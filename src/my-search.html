<html><head></head><body><div hidden="" by-polymer-bundler=""><script>function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=babelHelpers.getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=babelHelpers.getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return babelHelpers.possibleConstructorReturn(this,result)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(e){return!1}}/**
   * @namespace UdeS
   */window.UdeS=window.UdeS||{};/**
   * UdeS logical operators mixin.
   * @memberOf UdeS
   * @mixinFunction
   * @polymer
   * @param {Class} superClass The super class.
   * @return {Class} Class.
   */UdeS.LogicalOperatorsMixin=function(superClass){return/*#__PURE__*/function(_superClass){babelHelpers.inherits(_class,_superClass);var _super=_createSuper(_class);function _class(){babelHelpers.classCallCheck(this,_class);return _super.apply(this,arguments)}babelHelpers.createClass(_class,[{key:"and",/**
         * And function (&&).
         * @public
         * @param {...Boolean} values Boolean values for the "and" function.
         * @return {Boolean} The result of the "and" function.
         */value:function and(){for(var _len=arguments.length,values=Array(_len),_key=0;_key<_len;_key++){values[_key]=arguments[_key]}return values.reduce(function(a,b){return a&&b},!0)}/**
         * If function.
         * @public
         * @param {Boolean} booleanExpression Boolean expression.
         * @param {Number|String} trueValue The returned value if the boolean
         *                        expression is true.
         * @param {Number|String} falseValue The returned value if the boolean
         *                        expression is false.
         * @return {Number|String} The result of the "if" function.
         */},{key:"iif",value:function iif(booleanExpression,trueValue,falseValue){return booleanExpression?trueValue:falseValue}/**
         * Not function (!).
         * @public
         * @param {Boolean} booleanExpression Boolean expression.
         * @return {Boolean} The result of the "not" function.
         */},{key:"not",value:function not(booleanExpression){return!booleanExpression}/**
         * Or function (||).
         * @public
         * @param {...Boolean} values Boolean values for the "or" function.
         * @return {Boolean} The result of the "or" function.
         */},{key:"or",value:function or(){for(var _len2=arguments.length,values=Array(_len2),_key2=0;_key2<_len2;_key2++){values[_key2]=arguments[_key2]}return values.reduce(function(a,b){return a||b},!1)}/**
         * Exclusive or function.
         * @public
         * @param {...Boolean} values Boolean values for the "xor" function.
         * @return {Boolean} The result of the "xor" function.
         */},{key:"xor",value:function xor(){for(var _len3=arguments.length,values=Array(_len3),_key3=0;_key3<_len3;_key3++){values[_key3]=arguments[_key3]}var sum=values.reduce(function(a,b){return a+b},0);return 1===sum%2}}]);return _class}(superClass)};</script><dom-module id="paper-item-body" assetpath="../bower_components/paper-item/"><template><style>:host{overflow:hidden;@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-flex;}:host([two-line]){min-height:var(--paper-item-body-two-line-min-height, 72px);}:host([three-line]){min-height:var(--paper-item-body-three-line-min-height, 88px);}:host > ::slotted(*){overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}:host > ::slotted([secondary]){@apply --paper-font-body1;color:var(--paper-item-body-secondary-color, var(--secondary-text-color));@apply --paper-item-body-secondary;}</style><slot></slot></template><script>Polymer({is:"paper-item-body"});</script></dom-module><script>/*!
 * Fuse.js v3.6.1 - Lightweight fuzzy-search (http://fusejs.io)
 * 
 * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 */!function(e,t){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"==("undefined"===typeof module?"undefined":babelHelpers.typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define("Fuse",[],t):"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))?exports.Fuse=t():e.Fuse=t()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==babelHelpers.typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e){r.d(n,o,function(t){return e[t]}.bind(null,o))}return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(e){return babelHelpers.typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":babelHelpers.typeof(e)})(e)}function o(e,t){for(var r=0,n;r<t.length;r++){n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(1),a=r(7),s=a.get,c=(a.deepValue,a.isArray),h=function(){function e(t,r){var n=r.location,o=void 0===n?0:n,i=r.distance,a=void 0===i?100:i,c=r.threshold,h=void 0===c?.6:c,l=r.maxPatternLength,u=void 0===l?32:l,f=r.caseSensitive,v=void 0!==f&&f,p=r.tokenSeparator,d=void 0===p?/ +/g:p,g=r.findAllMatches,y=void 0!==g&&g,m=r.minMatchCharLength,k=void 0===m?1:m,b=r.id,S=void 0===b?null:b,x=r.keys,M=void 0===x?[]:x,_=r.shouldSort,w=void 0===_||_,L=r.getFn,A=void 0===L?s:L,O=r.sortFn,C=void 0===O?function(e,t){return e.score-t.score}:O,j=r.tokenize,P=void 0!==j&&j,I=r.matchAllTokens,F=void 0!==I&&I,T=r.includeMatches,N=void 0!==T&&T,z=r.includeScore,E=void 0!==z&&z,W=r.verbose,K=void 0!==W&&W;!function(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:o,distance:a,threshold:h,maxPatternLength:u,isCaseSensitive:v,tokenSeparator:d,findAllMatches:y,minMatchCharLength:k,id:S,keys:M,includeMatches:N,includeScore:E,shouldSort:w,getFn:A,sortFn:C,verbose:K,tokenize:P,matchAllTokens:F},this.setCollection(t),this._processKeys(M)}var t,r,a;return t=e,(r=[{key:"setCollection",value:function value(e){return this.list=e,e}},{key:"_processKeys",value:function value(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,r=e.length,n;t<r;t+=1){n=e[t];this._keyWeights[n]=1,this._keyNames.push(n)}else{for(var o=null,i=null,a=0,s=0,c=e.length,h;s<c;s+=1){h=e[s];if(!h.hasOwnProperty("name"))throw new Error("Missing \"name\" property in key object");var l=h.name;if(this._keyNames.push(l),!h.hasOwnProperty("weight"))throw new Error("Missing \"weight\" property in key object");var u=h.weight;if(0>u||1<u)throw new Error("\"weight\" property in key must bein the range of [0, 1)");i=null==i?u:Math.max(i,u),o=null==o?u:Math.min(o,u),this._keyWeights[l]=u,a+=u}if(1<a)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function value(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log("---------\nSearch pattern: \"".concat(e,"\""));var r=this._prepareSearchers(e),n=r.tokenSearchers,o=r.fullSearcher,i=this._search(n,o);return this._computeScore(i),this.options.shouldSort&&this._sort(i),t.limit&&"number"==typeof t.limit&&(i=i.slice(0,t.limit)),this._format(i)}},{key:"_prepareSearchers",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var r=e.split(this.options.tokenSeparator),n=0,o=r.length;n<o;n+=1){t.push(new i(r[n],this.options))}return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:"_search",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,r=this.list,n={},o=[];if("string"==typeof r[0]){for(var i=0,a=r.length;i<a;i+=1){this._analyze({key:"",value:r[i],record:i,index:i},{resultMap:n,results:o,tokenSearchers:e,fullSearcher:t})}return o}for(var s=0,c=r.length;s<c;s+=1){for(var h=r[s],l=0,u=this._keyNames.length,f;l<u;l+=1){f=this._keyNames[l];this._analyze({key:f,value:this.options.getFn(h,f),record:h,index:s},{resultMap:n,results:o,tokenSearchers:e,fullSearcher:t})}}return o}},{key:"_analyze",value:function value(e,t){var r=this,n=e.key,o=e.arrayIndex,i=void 0===o?-1:o,a=e.value,s=e.record,h=e.index,l=t.tokenSearchers,u=void 0===l?[]:l,f=t.fullSearcher,v=t.resultMap,p=void 0===v?{}:v,d=t.results,g=void 0===d?[]:d;!function e(t,o,i,a){if(null!=o)if("string"==typeof o){var s=!1,h=-1,l=0;r._log("\nKey: ".concat(""===n?"--":n));var v=f.search(o);if(r._log("Full text: \"".concat(o,"\", score: ").concat(v.score)),r.options.tokenize){for(var d=o.split(r.options.tokenSeparator),y=d.length,m=[],k=0,b=u.length,S;k<b;k+=1){S=u[k];r._log("\nPattern: \"".concat(S.pattern,"\""));for(var x=!1,M=0;M<y;M+=1){var _=d[M],w=S.search(_),L={};w.isMatch?(L[_]=w.score,s=!0,x=!0,m.push(w.score)):(L[_]=1,r.options.matchAllTokens||m.push(1)),r._log("Token: \"".concat(_,"\", score: ").concat(L[_]))}x&&(l+=1)}h=m[0];for(var A=m.length,O=1;O<A;O+=1){h+=m[O]}h/=A,r._log("Token score average:",h)}var C=v.score;-1<h&&(C=(C+h)/2),r._log("Score average:",C);var j=!r.options.tokenize||!r.options.matchAllTokens||l>=u.length;if(r._log("\nCheck Matches: ".concat(j)),(s||v.isMatch)&&j){var P={key:n,arrayIndex:t,value:o,score:C};r.options.includeMatches&&(P.matchedIndices=v.matchedIndices);var I=p[a];I?I.output.push(P):(p[a]={item:i,output:[P]},g.push(p[a]))}}else if(c(o))for(var F=0,T=o.length;F<T;F+=1){e(F,o[F],i,a)}}(i,a,s,h)}},{key:"_computeScore",value:function value(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,r=!!Object.keys(t).length,n=0,o=e.length;n<o;n+=1){for(var i=e[n],a=i.output,s=a.length,c=1,h=0;h<s;h+=1){var l=a[h],u=l.key,f=r?t[u]:1,v=0===l.score&&t&&0<t[u]?Number.EPSILON:l.score;c*=Math.pow(v,f)}i.score=c,this._log(i)}}},{key:"_sort",value:function value(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function value(e){var t=[];if(this.options.verbose){var r=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,function(e,t){if("object"===n(t)&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t},2)),r=null}var o=[];this.options.includeMatches&&o.push(function(e,t){var r=e.output;t.matches=[];for(var n=0,o=r.length,i;n<o;n+=1){i=r[n];if(0!==i.matchedIndices.length){var a={indices:i.matchedIndices,value:i.value};i.key&&(a.key=i.key),i.hasOwnProperty("arrayIndex")&&-1<i.arrayIndex&&(a.arrayIndex=i.arrayIndex),t.matches.push(a)}}}),this.options.includeScore&&o.push(function(e,t){t.score=e.score});for(var i=0,a=e.length,s;i<a;i+=1){s=e[i];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),o.length){for(var c={item:s.item},h=0,l=o.length;h<l;h+=1){o[h](s,c)}t.push(c)}else t.push(s.item)}return t}},{key:"_log",value:function value(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&o(t.prototype,r),a&&o(t,a),e}();e.exports=h},function(e,t,r){function n(e,t){for(var r=0,n;r<t.length;r++){n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(2),i=r(3),a=r(6),s=function(){function e(t,r){var n=r.location,o=void 0===n?0:n,i=r.distance,s=void 0===i?100:i,c=r.threshold,h=void 0===c?.6:c,l=r.maxPatternLength,u=void 0===l?32:l,f=r.isCaseSensitive,v=void 0!==f&&f,p=r.tokenSeparator,d=void 0===p?/ +/g:p,g=r.findAllMatches,y=void 0!==g&&g,m=r.minMatchCharLength,k=void 0===m?1:m,b=r.includeMatches,S=void 0!==b&&b;!function(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:o,distance:s,threshold:h,maxPatternLength:u,isCaseSensitive:v,tokenSeparator:d,findAllMatches:y,includeMatches:S,minMatchCharLength:k},this.pattern=v?t:t.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=a(this.pattern))}var t,r,s;return t=e,(r=[{key:"search",value:function value(e){var t=this.options,r=t.isCaseSensitive,n=t.includeMatches;if(r||(e=e.toLowerCase()),this.pattern===e){var a={isMatch:!0,score:0};return n&&(a.matchedIndices=[[0,e.length-1]]),a}var s=this.options,c=s.maxPatternLength,h=s.tokenSeparator;if(this.pattern.length>c)return o(e,this.pattern,h);var l=this.options,u=l.location,f=l.distance,v=l.threshold,p=l.findAllMatches,d=l.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:u,distance:f,threshold:v,findAllMatches:p,minMatchCharLength:d,includeMatches:n})}}])&&n(t.prototype,r),s&&n(t,s),e}();e.exports=s},function(e,t){var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(t.replace(r,"\\$&").replace(n,"|")),i=e.match(o),a=!!i,s=[];if(a)for(var c=0,h=i.length,l;c<h;c+=1){l=i[c];s.push([e.indexOf(l),l.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,r){var n=r(4),o=r(5);e.exports=function(e,t,r,i){for(var a=i.location,s=void 0===a?0:a,c=i.distance,h=void 0===c?100:c,l=i.threshold,u=void 0===l?.6:l,f=i.findAllMatches,v=void 0!==f&&f,p=i.minMatchCharLength,d=void 0===p?1:p,g=i.includeMatches,y=void 0!==g&&g,m=s,k=e.length,b=u,S=e.indexOf(t,m),x=t.length,M=[],_=0;_<k;_+=1){M[_]=0}if(-1!==S){var w=n(t,{errors:0,currentLocation:S,expectedLocation:m,distance:h});if(b=Math.min(w,b),-1!==(S=e.lastIndexOf(t,m+x))){var L=n(t,{errors:0,currentLocation:S,expectedLocation:m,distance:h});b=Math.min(L,b)}}S=-1;for(var A=[],O=1,C=x+k,j=1<<(31>=x?x-1:30),P=0;P<x;P+=1){for(var I=0,F=C;I<F;){n(t,{errors:P,currentLocation:m+F,expectedLocation:m,distance:h})<=b?I=F:C=F,F=Math.floor((C-I)/2+I)}C=F;var T=Math.max(1,m-F+1),N=v?k:Math.min(m+F,k)+x,z=Array(N+2);z[N+1]=(1<<P)-1;for(var E=N;E>=T;E-=1){var W=E-1,K=r[e.charAt(W)];if(K&&(M[W]=1),z[E]=(1|z[E+1]<<1)&K,0!==P&&(z[E]|=1|(A[E+1]|A[E])<<1|A[E+1]),z[E]&j&&(O=n(t,{errors:P,currentLocation:W,expectedLocation:m,distance:h}))<=b){if(b=O,(S=W)<=m)break;T=Math.max(1,2*m-S)}}if(n(t,{errors:P+1,currentLocation:m,expectedLocation:m,distance:h})>b)break;A=z}var $={isMatch:0<=S,score:0===O?.001:O};return y&&($.matchedIndices=o(M,d)),$}},function(e,t){e.exports=function(e,t){var r=t.errors,n=void 0===r?0:r,o=t.currentLocation,i=void 0===o?0:o,a=t.expectedLocation,s=void 0===a?0:a,c=t.distance,h=void 0===c?100:c,l=n/e.length,u=Math.abs(s-i);return h?l+u/h:u?1:l}},function(e,t){e.exports=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=[],n=-1,o=-1,i=0,a=e.length,s;i<a;i+=1){s=e[i];s&&-1===n?n=i:s||-1===n||((o=i-1)-n+1>=t&&r.push([n,o]),n=-1)}return e[i-1]&&i-n>=t&&r.push([n,i-1]),r}},function(e,t){e.exports=function(e){for(var t={},r=e.length,n=0;n<r;n+=1){t[e.charAt(n)]=0}for(var o=0;o<r;o+=1){t[e.charAt(o)]|=1<<r-o-1}return t}},function(e,t){var r=function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},n=function n(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)},o=function o(e){return"string"==typeof e},i=function i(e){return"number"==typeof e};e.exports={get:function get(e,t){var a=[];return function e(t,s){if(s){var c=s.indexOf("."),h=s,l=null;-1!==c&&(h=s.slice(0,c),l=s.slice(c+1));var u=t[h];if(null!=u)if(l||!o(u)&&!i(u)){if(r(u))for(var f=0,v=u.length;f<v;f+=1){e(u[f],l)}else l&&e(u,l);}else a.push(n(u))}else a.push(t)}(e,t),a},isArray:r,isString:o,isNum:i,toString:n}}])});</script></div><dom-module id="my-search"><template><style include="shared-styles">:host{display:block;padding:10px 20px;}#results{--paper-item-secondary:{font-size:x-small;line-height:1.4em;white-space:pre-wrap;};}</style><h1>Keresés</h1><div class="card"><paper-dropdown-menu id="place" label="Keresés itt" on-selected-item-changed="_searchCategoryChanged" selected-item="{{categoryItem}}"><paper-listbox slot="dropdown-content"><paper-item data="[[_fetchAllTemaDescription]]">Témák leírása</paper-item><paper-item data="[[_fetchAllFeladatDescription]]">Feladatok szövege</paper-item><paper-item data="[[_fetchAllMintafeladatDescription]]">Kidolgozott mintafeladatok</paper-item></paper-listbox></paper-dropdown-menu><template is="dom-if" if="[[and(categoryValid, _loadNotRequestedYet)]]"><paper-button on-click="_requestLoad"><iron-icon icon="file-download"></iron-icon>Leírások betöltése</paper-button></template><paper-spinner active="[[loading]]"></paper-spinner><template is="dom-if" if="[[and(_loadNotRequestedYet, categoryItem.data.estimate)]]"><p>Várható adatforgalom: <span>[[categoryItem.data.estimate]]</span></p></template></div><template is="dom-if" if="[[loaded]]"><div class="card"><paper-input label="Keresés..." type="search" value="{{searchQuery}}" on-keydown="_searchKeyDown"></paper-input><template is="dom-if" if="[[searchQuery]]"><template is="dom-if" if="[[resultsIncomplete]]"><p class="info"><iron-icon icon="info-outline"></iron-icon>Nyomjon entert a teljes kereséshez</p></template><paper-listbox id="results"><template is="dom-repeat" items="[[_results]]"><a class="paper-item-link" href$="[[item.item.url]]" tabindex="-1" target="_blank"><paper-item><paper-item-body two-line=""><div>[[item.item.name]]</div><div secondary="" inner-h-t-m-l="[[_formattedDesc(item)]]"></div></paper-item-body></paper-item></a></template></paper-listbox></template></div></template></template><script>function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=babelHelpers.getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=babelHelpers.getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return babelHelpers.possibleConstructorReturn(this,result)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(e){return!1}}var MySearch=/*#__PURE__*/function(_UdeS$LogicalOperator){babelHelpers.inherits(MySearch,_UdeS$LogicalOperator);var _super=_createSuper(MySearch);function MySearch(){babelHelpers.classCallCheck(this,MySearch);return _super.apply(this,arguments)}babelHelpers.createClass(MySearch,[{key:"_searchCategoryChanged",value:function _searchCategoryChanged(event){var _this=this;if(this._promiseStatus)this._promiseStatus.obsolete=!0;this.setProperties({categoryValid:!1,loadRequested:!1,loaded:!1,failed:!1,data:[],fastSearchDone:!1,fullSearchDone:!1,searchInitiated:!1},!0);if(event.detail.value&&event.detail.value.data){this._setCategoryValid(!0);var promise=event.detail.value.data,promiseStatus=this._promiseStatus={promise:promise,obsolete:!1};promise.defer.finally(function(){if(!promiseStatus.obsolete){_this._setLoadRequested(!0)}});promise.then(function(data){if(!promiseStatus.obsolete){_this._setData(data);_this._setLoaded(!0)}},function(){if(!promiseStatus.obsolete){_this._setFailed(!0)}})}}},{key:"_requestLoad",value:function _requestLoad(){this._promiseStatus.promise.run();// Supposing _promiseStatus initiated
}},{key:"_initFuse",value:function _initFuse(data){return new Fuse(data.map(function(_ref,index){var _ref2=babelHelpers.slicedToArray(_ref,2),description=_ref2[0],object=_ref2[1];return{description:description,name:object.name,url:object.url,index:index}}),{shouldSort:!0,includeScore:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["description","name"]})}},{key:"_fastSearch",value:function _fastSearch(fuse,query){return fuse.list.filter(function(item){return query.split(" ").some(function(word){return fuse.options.keys.some(function(key){return item[key]&&item[key].includes(word)})})}).map(function(item){return{item:item}})}},{key:"_fullSearch",value:function _fullSearch(fuse,query){return fuse.search(query)}},{key:"_searchKeyDown",value:function _searchKeyDown(event){if(13===event.keyCode){this._doSearch(this._fuse,this.searchQuery,!0);event.preventDefault()}}},{key:"_doSearch",value:function _doSearch(fuse,query){var full=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1;if(!fuse||!query)return;if(this._searchStatus){this._searchStatus.obsolete=!0;if(this._searchStatus.fullSearchTimeout){window.clearTimeout(this._searchStatus.fullSearchTimeout)}}if(fuse&&query){this.setProperties({fullSearchDone:!1,fastSearchDone:!1,searchInitiated:!0},!0);var status=this._searchStatus={obsolete:!1},doFullSearch=/*#__PURE__*/function(){var _ref3=babelHelpers.asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(that,fuse,query){var results;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:results=that._fullSearch(fuse,query);if(!status.obsolete){Polymer.RenderStatus.afterNextRender(that,function(){if(!status.obsolete){this.setProperties({results:results,fullSearchDone:!0},!0)}})}case 2:case"end":return _context.stop();}}},_callee)}));return function doFullSearch(_x,_x2,_x3){return _ref3.apply(this,arguments)}}(),doSimpleSearch=/*#__PURE__*/function(){var _ref4=babelHelpers.asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(that,fuse,query){var results;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:results=that._fastSearch(fuse,query);if(!status.obsolete){Polymer.RenderStatus.afterNextRender(that,function(){if(!status.obsolete){this.setProperties({results:results,fastSearchDone:!0},!0)}});status.fullSearchTimeout=window.setTimeout(function(){if(!status.obsolete){// noinspection JSIgnoredPromiseFromCall
doFullSearch(that,fuse,query)}},700)}case 2:case"end":return _context2.stop();}}},_callee2)}));return function doSimpleSearch(_x4,_x5,_x6){return _ref4.apply(this,arguments)}}();if(full){// noinspection JSIgnoredPromiseFromCall
doFullSearch(this,fuse,query)}else{// noinspection JSIgnoredPromiseFromCall
doSimpleSearch(this,fuse,query)}}else{this.setProperties({fullSearchDone:!1,fastSearchDone:!1,searchInitiated:!1})}}},{key:"_formatScore",value:function _formatScore(score){return Math.round(100*score)+"%"}},{key:"_formattedDesc",value:function _formattedDesc(item){if(item&&item.item&&item.item.description){var description=item.item.description;this.searchQuery.split(" ").forEach(function(word){description=description.replace(word,"<mark>"+word+"</mark>")});return description}else{return"No description available"}}},{key:"limit",value:function limit(array,size){if(array&&size){return array.slice(0,size)}else{return array}}},{key:"_clog",value:function _clog(value){console.log(value);if(value&&value.data)console.log("->",value.data)}}],[{key:"is",get:function get(){return"my-search"}},{key:"properties",get:function get(){return{_fetchAllTemaDescription:{type:Object,value:function value(){var result=fetchAllTemaDescription;result.estimate="60 requests, 40KB";return result}},_fetchAllFeladatDescription:{type:Object,value:function value(){var result=fetchAllFeladatDescription;result.estimate="1700 requests, 1.7MB";return result}},_fetchAllMintafeladatDescription:{type:Object,value:function value(){var result=fetchAllMintafeladatDescription;result.estimate="60 requests, 80KB";return result}},categoryValid:{type:Boolean,value:!1,notify:!0,readOnly:!0},_categoryInvalid:{type:Boolean,notify:!0,computed:"not(categoryValid)"},loadRequested:{type:Boolean,value:!1,notify:!0,readOnly:!0},_loadNotRequestedYet:{type:Boolean,notify:!0,computed:"not(loadRequested)"},loaded:{type:Boolean,value:!1,notify:!0,readOnly:!0},_notLoadedYet:{type:Boolean,notify:!0,computed:"not(loaded)"},failed:{type:Boolean,value:!1,notify:!0,readOnly:!0},_notFailedYet:{type:Boolean,notify:!0,computed:"not(failed)"},loading:{type:Boolean,computed:"and(loadRequested, _notLoadedYet, _notFailedYet)",notify:!0},data:{type:Array,value:[],notify:!0,readOnly:!0},_fuse:{type:Object,notify:!0,computed:"_initFuse(data)"},searchQuery:{type:String,notify:!0},results:{type:Array,notify:!0,//computed: '_fullSearch(_fuse, searchQuery)'
readOnly:!0},resultLimit:{type:Number,notify:!0,value:function value(){return preferences.searchLimit}},_results:{type:Array,notify:!0,computed:"limit(results, resultLimit)"},fastSearchDone:{type:Boolean,value:!1,notify:!0,readOnly:!0},fullSearchDone:{type:Boolean,value:!1,notify:!0,readOnly:!0},_noFullSearchDoneYet:{type:Boolean,notify:!0,computed:"not(fullSearchDone)"},searchInitiated:{type:Boolean,value:!1,notify:!0,readOnly:!0},resultsIncomplete:{type:Boolean,notify:!0,computed:"and(searchInitiated, _noFullSearchDoneYet)"}}}},{key:"observers",get:function get(){return["_doSearch(_fuse, searchQuery)"]}}]);return MySearch}(UdeS.LogicalOperatorsMixin(Polymer.Element));window.customElements.define(MySearch.is,MySearch);</script></dom-module></body></html>