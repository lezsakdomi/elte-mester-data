<html><head></head><body><dom-module id="my-files"><template><style include="shared-styles">:host{display:block;padding:10px 20px;}#hashTableLengthDiv{margin:1em 0;}#hashTableLengthDiv > paper-slider{width:100%;}#infoDiv{margin-top:1cm;}#infoDiv > iron-icon{position:absolute;}#infoDiv > p{padding-left:2em;text-align:justify;}</style><div class="card">Amennyiben kapott egy "gyorslinket" (pl. <code>d41d8cd98f00b204e9800998ecf8427e</code> vagy <code>Húsvét/minta.zip</code>), azt ide beillesztheti:<paper-input label="Link" value="{{link}}"></paper-input><template is="dom-if" if="[[url]]"><a target="_blank" href$="[[url]]"><paper-button><iron-icon icon="file-download"></iron-icon>Letöltés</paper-button></a></template><paper-spinner active="[[loading]]"></paper-spinner></div><template is="dom-if" if="[[hashTables]]"><div class="card"><h1>Gyorslink készítése</h1><paper-dropdown-menu label="Típus" selected-item="{{_hashTableSelection}}"><paper-listbox slot="dropdown-content"><template is="dom-repeat" items="[[hashTables]]" filter="_reversable"><paper-item data="[[item]]">[[item.name]]</paper-item></template></paper-listbox></paper-dropdown-menu><template is="dom-if" if="[[hashTable]]"><div id="hashTableLengthDiv">Hash hossza:<paper-slider immediate-value="{{hashTable.length}}" value="{{hashTable.length}}" min="1" max="[[hashTable.maxLength]]" editable=""></paper-slider></div><template is="dom-if" if="[[reverseUpdateFailed]]"><div id="errorDiv"><iron-icon icon="error"></iron-icon>A megadott beállításokkal létrehozott hash másik fájlra mutatna</div></template></template><template is="dom-if" if="[[_showInfoNeeded]]"><div id="infoDiv"><iron-icon icon="info-outline"></iron-icon><p>Gyorslinkként használható egy fájl elérési útjának a vége, vagy a tartalmának checksumja. Checksum esetén, a githez hasonlóan, elég csak annak a kezdetét megadni.</p><p>Először a fenti "Link" mezőben adja meg egy fájl elérési útját (pl. <code>Idő */feladat.pdf</code> illetve <code>Idő */minta.zip</code>), majd ebben a szekcióban állítsa be, hogy hogyan kívánja letitkosítani.</p><p>Az elérhető állományokat a következő oldalon lehet böngészni, megtekinteni, letölteni, esetleg javaslatokat (<i>issue</i>) küldeni: <a href="https://github.com/lezsakdomi/elte-mester-data">Az alapértelmezett GitHub repository</a></p></div></template></div></template></template><script>function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=babelHelpers.getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=babelHelpers.getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return babelHelpers.possibleConstructorReturn(this,result)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(e){return!1}}var HashTable=/*#__PURE__*/function(){function HashTable(file,contents){babelHelpers.classCallCheck(this,HashTable);this.file=file;this.data=contents.split("\n").map(function(row){var index=row.indexOf(" ");return{key:row.slice(0,index),value:row.slice(index+2)}})}babelHelpers.createClass(HashTable,[{key:"get",value:function get(key){for(var i=0,entry;i<this.data.length;i++){entry=this.data[i];if(entry.key.startsWith(key))return entry.value}return null}},{key:"encode",value:function encode(value){for(var length=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1/0,i=0,entry;i<this.data.length;i++){entry=this.data[i];if(entry.value===value)return entry.key.slice(0,length)}return null}}],[{key:"fetch",value:function(){var _fetch=babelHelpers.asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(file,name,maxLength,defaultLength){var contents,result;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return readFile([file]);case 2:contents=_context.sent;result=new HashTable(file,contents);result.name=name;result.maxLength=maxLength;result.length=defaultLength?defaultLength:maxLength;return _context.abrupt("return",result);case 8:case"end":return _context.stop();}}},_callee)}));function fetch(_x,_x2,_x3,_x4){return _fetch.apply(this,arguments)}return fetch}()}]);return HashTable}(),FileListTable=/*#__PURE__*/function(){function FileListTable(file,contents){babelHelpers.classCallCheck(this,FileListTable);this.file=file;this.data=contents.split("\n")}babelHelpers.createClass(FileListTable,[{key:"get",value:function get(key){for(var i=0,entry;i<this.data.length;i++){entry=this.data[i];if(entry.endsWith(key))return entry}return null}}],[{key:"fetch",value:function(){var _fetch2=babelHelpers.asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(file){var contents;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return readFile([file]);case 2:contents=_context2.sent;return _context2.abrupt("return",new FileListTable(file,contents));case 4:case"end":return _context2.stop();}}},_callee2)}));function fetch(_x5){return _fetch2.apply(this,arguments)}return fetch}()}]);return FileListTable}(),MyFiles=/*#__PURE__*/function(_Polymer$Element){babelHelpers.inherits(MyFiles,_Polymer$Element);var _super=_createSuper(MyFiles);babelHelpers.createClass(MyFiles,null,[{key:"is",get:function get(){return"my-files"}},{key:"properties",get:function get(){return{link:{type:String,notify:!0,observer:"_linkChange"},route:{type:String,notify:!0,observer:"_routeChange"},hashTables:{type:Array,//value: [],
notify:!0,readOnly:!0},path:{type:String,notify:!0,computed:"_computePath(link, hashTables)",observer:"_pathChange"},url:{type:Object,notify:!0,readOnly:!0},_hashTableSelection:{type:Object,notify:!0},hashTable:{type:Object,notify:!0,computed:"_computeHashTable(_hashTableSelection)"},loading:{type:Boolean,notify:!0,readOnly:!0},reverseUpdateFailed:{type:Boolean,notify:!0,readOnly:!0},_showInfoNeeded:{type:Boolean,notify:!0,value:!0,computed:"_computeShowInfoNeeded(hashTable)"}}}},{key:"observers",get:function get(){return["_reverseUpdateLink(path, hashTable, hashTable.length)"]}}]);function MyFiles(){var _this;babelHelpers.classCallCheck(this,MyFiles);_this=_super.call(this);Promise.all([HashTable.fetch("MD5SUMS","MD5",32),HashTable.fetch("SHA1SUMS","SHA",40,7),HashTable.fetch("SHA256SUMS","SHA256",64,16),HashTable.fetch("WHIRLPOOLSUMS","Whirlpool",128,32),HashTable.fetch("TIGERSUMS","Tiger",48,16),FileListTable.fetch("files.list")]).then(function(tables){return _this._setHashTables(tables)});return _this}babelHelpers.createClass(MyFiles,[{key:"_routeChange",value:function _routeChange(route){if(route!==void 0){this.link=/(?:\/)?(.*)/.exec(route.path)[1]}}},{key:"_linkChange",value:function _linkChange(link){if(link!==void 0){this.route={path:"/"+link}}}},{key:"_computePath",value:function _computePath(link,hashtables){if(link&&hashtables){for(var i=0,result;i<hashtables.length;i++){result=hashtables[i].get(link);if(null!==result)return result}}}},{key:"_pathChange",value:function _pathChange(path){var _this2=this;if(path){this._setLoading(!0);if(this._pathStatus)this._pathStatus.obsolete=!0;var pathStatus=this._pathStatus={obsolete:!1};Thing.fetchFile(path).then(function(response){if(pathStatus.obsolete)throw new Error("Timed out");return response.blob()}).then(function(blob){if(pathStatus.obsolete)throw new Error("Timed out");Polymer.RenderStatus.afterNextRender(_this2,function(){_this2._setUrl(URL.createObjectURL(blob));_this2._setLoading(!1)})})}}},{key:"_reversable",value:function _reversable(hashTable){return hashTable.encode!==void 0}},{key:"_computeHashTable",value:function _computeHashTable(_hashTableSelection){if(_hashTableSelection){return _hashTableSelection.data}}},{key:"_reverseUpdateLink",value:function _reverseUpdateLink(path,hashTable,length){if(path&&hashTable&&length){var result=hashTable.encode(path,length);if(result){if(this._computePath(result,this.hashTables)!==path){this._setReverseUpdateFailed(!0)}else{this.link=result;this._setReverseUpdateFailed(!1)}}}}},{key:"_computeShowInfoNeeded",value:function _computeShowInfoNeeded(hashTable){return!hashTable}}]);return MyFiles}(Polymer.Element);window.customElements.define(MyFiles.is,MyFiles);</script></dom-module></body></html>